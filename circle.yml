machine:
  python:
    version: 2.7.12
  environment:
    RANDOM_SEED: 0
    PIPENV_NOSPIN: true

dependencies:
  pre:
    - pip install https://github.com/kennethreitz/pipenv/archive/290366b1ee46991ea662a646c43fc1e49eef5e12.zip
    - make doctor
  override:
    - make install
  cache_directories:
    - .venv

test:
  override:
    - make check
    - make test-unit REPORTS=${CIRCLE_TEST_REPORTS}
    - make test-int REPORTS=${CIRCLE_TEST_REPORTS}
